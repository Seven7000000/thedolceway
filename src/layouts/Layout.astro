---
import '../styles/global.css';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  description?: string;
  ogImage?: string;
  ogColor?: string;
}

const {
  title,
  description = "26 apps. One developer. Zero excuses. Follow the journey.",
  ogImage = "/og-default.png",
  ogColor = "#8B5CF6"
} = Astro.props;

const siteUrl = "https://thedolceway.com";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="author" content="Dolce" />

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="The Dolce Way" />
    <meta property="og:url" content={siteUrl} />
    <meta property="og:image" content={`${siteUrl}${ogImage}`} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@thedolceway" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={`${siteUrl}${ogImage}`} />

    <!-- Theme Color -->
    <meta name="theme-color" content={ogColor} />

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

    <title>{title}</title>

    <!-- Kit (ConvertKit) -->
    <script async src="https://f.convertkit.com/ckjs/ck.5.js"></script>
  </head>
  <body class="min-h-screen flex flex-col">
    <Nav />
    <main class="flex-1">
      <slot />
    </main>
    <Footer />

    <!-- Kit Waitlist Modal Form -->
    <form
      action="https://app.kit.com/forms/8992007/subscriptions"
      class="seva-form formkit-form"
      method="post"
      data-sv-form="8992007"
      data-uid="649625f3e2"
      data-format="modal"
      data-version="5"
      data-options='{"settings":{"after_subscribe":{"action":"message","success_message":"Success! Now check your email to confirm your subscription.","redirect_url":""},"analytics":{"google":null,"fathom":null,"facebook":null,"segment":null,"pinterest":null,"sparkloop":null,"googletagmanager":null},"modal":{"trigger":"timer","scroll_percentage":null,"timer":5,"devices":"all","show_once_every":15},"powered_by":{"show":false,"url":"https://kit.com/features/email-marketing?utm_campaign=poweredby&amp;utm_content=form&amp;utm_medium=referral&amp;utm_source=dynamic"},"recaptcha":{"enabled":false},"return_visitor":{"action":"show","custom_content":""},"slide_in":{"display_in":"bottom_right","trigger":"timer","scroll_percentage":null,"timer":5,"devices":"all","show_once_every":15},"sticky_bar":{"display_in":"top","trigger":"timer","scroll_percentage":null,"timer":5,"devices":"all","show_once_every":15}},"version":"5"}'
      min-width="400 500 600 700 800"
      style="display: none;"
    >
      <div data-style="modal">
        <div data-element="overlay" style="background-color: rgba(0, 0, 0, 0.85);"></div>
        <div class="formkit-modal" data-element="modal" style="background-color: rgb(10, 10, 10); border-radius: 16px; overflow: hidden; max-width: 420px; border: 1px solid #1c1c1c;">
          <button type="button" class="formkit-close" data-element="close" style="color: rgb(107, 114, 128); padding: 12px;"></button>
          <div class="formkit-container" data-element="container" style="padding: 40px 32px;">
            <div class="formkit-header" data-element="header" style="color: #fafafa; font-size: 1.5rem; font-weight: 700; text-align: center; margin-bottom: 8px; letter-spacing: -0.02em;">
              Get Early Access
            </div>
            <div class="formkit-subheader" data-element="subheader" style="color: rgb(161, 161, 170); font-size: 0.9375rem; text-align: center; margin-bottom: 24px; line-height: 1.6;">
              Be the first to know when new apps launch. No spam, just updates.
            </div>
            <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert" style="color: #ef4444;"></ul>
            <div data-element="fields" class="seva-fields formkit-fields" style="display: flex; flex-direction: column; gap: 12px;">
              <div class="formkit-field">
                <input
                  class="formkit-input"
                  name="email_address"
                  aria-label="Email Address"
                  placeholder="Your email address"
                  required
                  type="email"
                  style="width: 100%; padding: 14px 16px; background: rgb(23, 23, 23); border: 1px solid rgb(38, 38, 38); border-radius: 10px; color: #fafafa; font-size: 0.9375rem; outline: none; transition: border-color 200ms ease;"
                />
              </div>
              <button
                data-element="submit"
                class="formkit-submit formkit-submit"
                style="width: 100%; padding: 14px 24px; background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%); border: none; border-radius: 10px; color: white; font-size: 0.9375rem; font-weight: 600; cursor: pointer; transition: opacity 200ms ease, transform 200ms ease;"
              >
                <div class="formkit-spinner" style="display: none;"><div></div><div></div><div></div></div>
                <span>Join the Waitlist</span>
              </button>
            </div>
            <div class="formkit-powered-by-convertkit-container" style="margin-top: 20px; text-align: center;"></div>
          </div>
        </div>
      </div>
    </form>
  </body>
</html>
